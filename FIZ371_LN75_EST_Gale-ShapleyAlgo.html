
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Gale-Shapley Matching Algorithm &#8212; FIZ371 - Scientific and Technical Computations Lecture Notes</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Gale-Shapley Algorithm Implementation" href="GaleShapleyMatching_Implementation.html" />
    <link rel="prev" title="Implementation of Prisonner’s Dilemma with Memory" href="FIZ371_LN28_EST_Game_Theory_PrisonnersDilemmaWithMemory.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">FIZ371 - Scientific and Technical Computations Lecture Notes</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Welcome to your Jupyter Book
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Cover.html">
   FIZ371 - Scientific and Technical Calculations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN01_EST_Probabilities_Theory.html">
   Probabilities - Concept &amp; Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN01_EST_Probabilities_Theory_Application_WOZ.html">
   Probabilities Application: Letter Frequencies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN02_EST_Probabilities.html">
   Probabilities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN08_EST_Application_Monty_Hall.html">
   Monty Hall Problem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="WhiteTokenOutOf2.html">
   Application White Token Out Of 2 Bags
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN06_SixSwitchPuzzle_and_Parallelization.html">
   Six Switch Puzzle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN10_EST_Distributions_1.html">
   Discrete Distributions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN15_EST_Distributions_2.html">
   Distributions 2 : Continous Distributions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN25_EST_Game_Theory.html">
   Game Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN28_EST_Game_Theory_PrisonnersDilemmaWithMemory.html">
   Application Prisonner's Dilemma (with Memory)
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Gale-Shapley Matching Algorithm
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="GaleShapleyMatching_Implementation.html">
   Gale-Shapley Algorithm Implementation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN36_EST_Information_Theory.html">
   Information Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN36_EST_Information_Theory_MessageTransmissionOverNoise.html">
   Information Theory Application
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN47_EST_CellularAutomata_GameOfLife.html">
   Cellular Automata
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN80_EST_2DIsing.html">
   2D Ising Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN58_EST_ClusteringAndClassification.html">
   Clustering and Classification
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_LN69_EST_NeuralNetworks.html">
   Neural Networks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_20221_MT.html">
   2022-23 Fall Term Midterm Exam
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_20221_Final.html">
   2022-23 Fall Term Final Exam
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_20221_Resit.html">
   2022-23 Fall Term Resit Exam
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_20231_MT_MakeUp.html">
   Midterm Resit Exam
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_20231_Final.html">
   Final Exam
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="FIZ371_20231_Final_Resit.html">
   Final Exam’s Resit
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="MinimizeOptimizeFit.html">
   Optimization, Minimization &amp; Fitting Notes &amp; Recipes
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="_sources/FIZ371_LN75_EST_Gale-ShapleyAlgo.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/FIZ371_LN75_EST_Gale-ShapleyAlgo.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/emresururi/FIZ228/master?urlpath=tree/FIZ371_LN75_EST_Gale-ShapleyAlgo.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Gale-Shapley Matching Algorithm
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-matching-problem">
   The Matching Problem
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise">
     Exercise
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Exercise
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-the-roommate-problem">
     Exercise: The roommate Problem
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-gale-shapley-algorithm-for-finding-a-stable-matching-system">
   The Gale-Shapley algorithm for finding a stable matching system
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-number-of-men-does-not-equal-the-number-of-women">
   The number of men does not equal the number of women
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#existence-of-a-preference-list-that-does-not-include-all-members-of-the-opposite-sex">
   Existence of a preference list that does not include all members of the opposite sex
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#possible-indifference">
   Possible Indifference
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#condition-for-the-existence-of-a-unique-stable-matching-system">
   Condition for the existence of a unique stable matching system
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#discussion">
   Discussion
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#references">
   References
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Gale-Shapley Matching Algorithm</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Gale-Shapley Matching Algorithm
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-matching-problem">
   The Matching Problem
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise">
     Exercise
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Exercise
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-the-roommate-problem">
     Exercise: The roommate Problem
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-gale-shapley-algorithm-for-finding-a-stable-matching-system">
   The Gale-Shapley algorithm for finding a stable matching system
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-number-of-men-does-not-equal-the-number-of-women">
   The number of men does not equal the number of women
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#existence-of-a-preference-list-that-does-not-include-all-members-of-the-opposite-sex">
   Existence of a preference list that does not include all members of the opposite sex
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#possible-indifference">
   Possible Indifference
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#condition-for-the-existence-of-a-unique-stable-matching-system">
   Condition for the existence of a unique stable matching system
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#discussion">
   Discussion
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#references">
   References
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <section id="gale-shapley-matching-algorithm">
<h1>Gale-Shapley Matching Algorithm<a class="headerlink" href="#gale-shapley-matching-algorithm" title="Permalink to this headline">¶</a></h1>
<p><strong>FIZ371 - Scientific &amp; Technical Computations | 26/04/2021</strong></p>
<p>Dr. Emre S. Tasci <a class="reference external" href="mailto:emre&#46;tasci&#37;&#52;&#48;hacettepe&#46;edu&#46;tr">mailto:emre<span>&#46;</span>tasci<span>&#64;</span>hacettepe<span>&#46;</span>edu<span>&#46;</span>tr</a></p>
<p><em>This version of the Lecture Notes is just a draft with most of the parts directly assembled from Gura &amp; Maschler’s book (see References).</em></p>
<p>Thus: Definitely <strong>NOT</strong> for distribution!</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.eecs.harvard.edu/cs286r/courses/fall09/papers/galeshapley.pdf">“College Admissions and the Stability of Marriage”</a> David Gale &amp; Lloyd Shapley, American Mathematical Monthly 69 9-15 (1962).</p></li>
</ul>
<blockquote>
<div><p>According to Gale, 2 the paper owes its origin to an article in the
New Yorker, dated September 10, 1960, in which the writer describes
the difficulties of undergraduate admissions at Yale University. Then
as now, students would apply to several universities and admissions
officers had no way of telling which applicants were serious about
enrolling. The students, who had every reason to manipulate, would
create the impression that each university was their top choice, while
the universities would enroll too many students, assuming that many
of them would not attend. The whole process became a guessing game.
Above all, there was a feeling that actual enrollments were far from
optimal.</p>
</div></blockquote>
<p>[Gura &amp; Maschler, p1]</p>
<p>Gale &amp; Shapley proved that stable matching alway exists (they also used the analogy for matching men and women(!))</p>
</section>
<section id="the-matching-problem">
<h1>The Matching Problem<a class="headerlink" href="#the-matching-problem" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>Consider a community of men and women where the number of men
equals the number of women.</p>
</div></blockquote>
<blockquote>
<div><p><strong>Objective:</strong> Propose a good matching system for the community. To
be able to propose such a system, we shall need relevant data about
the community. Accordingly, we shall ask every community member to rank
members of the opposite sex in accordance with his or
her preferences for a marriage partner. We shall assume that no man
or woman in the community is indifferent to a choice between two
or more members of the opposite sex. For example, if Al’s list of
preferences consists of Ann, Beth, Cher, and Dot, in that order, then
Al ranks Ann first, Beth second, Cher third, and Dot fourth. Again,
we shall assume that Al is not indifferent to a choice between two or
more of the four women on his list.</p>
</div></blockquote>
<p>[Gura &amp; Maschler, p2]</p>
<p><img alt="image.png" src="_images/GaleShapley1.png" /></p>
<p><strong>Problem:</strong> Given everyone’s preferences, can you propose a matching system for
the community?</p>
<p><img alt="image.png" src="_images/GaleShapley2.png" /></p>
<p>(Man-&gt;Woman) x (Woman-&gt;Man)</p>
<blockquote>
<div><p>This is indeed a possible proposal, but it is not a good one.
Cher is displeased, because she is paired off with her last choice. She
can propose to Bob, but she will be turned down because she is his last
choice. She will fare no better with Cal, because she is his third choice
while he is paired off with his second choice. On the other hand, if
Cher proposes to Al, he will be very pleased, because she is his first
choice.</p>
</div></blockquote>
<blockquote>
<div><p>The proposal is rejected, because Cher and Al prefer each other to their
actual mates, and one can reasonably assume that they will reject the
matchmaker’s proposal.</p>
</div></blockquote>
<p>[Gura &amp; Maschler, p3]</p>
<blockquote>
<div><p><strong>Another Possible Proposal:</strong> Let us try to pair off all the men with their
first choice.</p>
</div></blockquote>
<blockquote>
<div><p>Al’s first choice is Cher.<br />
Bob’s first choice is Dot.<br />
Cal’s first choice is Ann.<br />
Dan’s first choice is Dot.</p>
</div></blockquote>
<blockquote>
<div><p>We see that there is a problem: both Bob and Dan prefer Dot. We can
try to pair off Dan with his second choice, Cher, but she is already
paired off with Al. Will Dan’s third choice work out? Dan’s third
choice is Ann, but she is already paired off with Cal. That leaves Dan
with his last choice, Beth.</p>
</div></blockquote>
<p><img alt="image.png" src="_images/GaleShapley3.png" /></p>
<blockquote>
<div><p>Three of the four men are paired off with their first choice. Do you
think this proposal will be accepted or rejected?</p>
</div></blockquote>
<blockquote>
<div><p><strong>Still Another Possible Proposal:</strong> Now we shall try to pair off all the
women with their first choice. Is it possible?</p>
</div></blockquote>
<blockquote>
<div><p>Ann’s first choice is Al.<br />
Beth’s first choice is Al.<br />
Cher’s first choice is Bob.<br />
Dot’s first choice is Cal.</p>
</div></blockquote>
<blockquote>
<div><p>We see that if we pair off Ann with her first choice, Al, then Beth
cannot be paired off with him too. We can pair off Beth with her
second choice, Bob, but he is already paired off with Cher. And Beth’s
third choice, Cal, is already paired off with Dot. Beth is therefore left
with her last choice, Dan.</p>
</div></blockquote>
<p><img alt="image.png" src="_images/GaleShapley4.png" /></p>
<blockquote>
<div><p>Three of the four women are paired off with their first choice. Will
they accept or reject this matching system?</p>
</div></blockquote>
<blockquote>
<div><p>Beth can fight this matching. For example, she can approach Bob and
suggest that they both reject this matching and form their own pair.
In so doing Beth gets her second choice – better than her fourth choice
– and Bob gets his third choice – better than his fourth choice. Thus,
the above matching will be rejected by Beth and Bob.</p>
</div></blockquote>
<blockquote>
<div><p><strong>Stable Matching System:</strong> <em>A matching system must be such that under it there cannot be found
a man and a woman who are not paired off with each other but prefer
each other to their actual mates.</em></p>
</div></blockquote>
<p><img alt="image.png" src="_images/GaleShapley5.png" /></p>
<p><img alt="image.png" src="_images/GaleShapley6.png" /></p>
<blockquote>
<div><p><strong>Note:</strong> The position of the circles in the two tables must be
identical.</p>
</div></blockquote>
<blockquote>
<div><p><strong>Verification:</strong> Mr. c and Mr. d are paired off with their first choice,
so they need look no further. Mr. b prefers Ms. B to his actual mate,
Ms. A, but Ms. B will turn him down because he is her last choice.
Mr. a prefers Ms. B and Ms. C to his actual mate, D. If he proposes to
B, she will turn him down because he is her second choice and she is
paired off with her first choice. If he proposes to C, she too will turn him down because he is her last choice.</p>
</div></blockquote>
<blockquote>
<div><p><strong>Remark:</strong> When no man wants to deviate from the matchmaker’s recommendation, then it does not matter if a woman wants to change,
because she will not find a man who will agree to cooperate with her.
Thus, there is no further need to continue the verification.</p>
</div></blockquote>
<section id="exercise">
<h2>Exercise<a class="headerlink" href="#exercise" title="Permalink to this headline">¶</a></h2>
<p>Given the following preference structure of a community of five
women and five men:</p>
<p><img alt="image.png" src="_images/GaleShapley7.png" /></p>
<p>Which of the following matching systems are not stable?</p>
<p><img alt="image-2.png" src="_images/GaleShapley8.png" /></p>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p><img alt="image.png" src="_images/GaleShapley9.png" /></p>
<blockquote>
<div><p>i. This matching system is stable because A and B are paired off with
their first choice and therefore will refuse to annul the match.</p>
</div></blockquote>
<blockquote>
<div><p>ii. This matching system is stable, too, because a and b are paired
off with their first choice and therefore will refuse to deviate from
the matchmaker’s recommendation.</p>
</div></blockquote>
<blockquote>
<div><p>This example shows that if one side (say, the men’s) obtains its first
choice, that is, if one side is satisfied with the match, then the other
side cannnot undermine the system, however dissatisfied it may be
with the match.</p>
</div></blockquote>
<blockquote>
<div><p><em>A stable matching system is not necessarily a system under
which everyone is satisfied. A matching system is stable when no
unmatched pair will find it beneficial to deviate from the matching
and form their own match. In other words, a stable matching system serves the interests of the matchmaker, whose recommendation
will be honored, but it does not necessarily serve the interests of all community members.</em></p>
</div></blockquote>
</section>
<section id="id1">
<h2>Exercise<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p><img alt="image.png" src="_images/GaleShapley10.png" /></p>
<p>i. The men obtain their first choice:
<img alt="image.png" src="_images/GaleShapley11.png" /></p>
<p>ii. The women obtain their first choice:
<img alt="image.png" src="_images/GaleShapley12.png" /></p>
<p>iii. There is also a third stable matching system, where men and women all obtain their second choice:
<img alt="image.png" src="_images/GaleShapley13.png" /></p>
<blockquote>
<div><p>In fact, all those who try to obtain their first choice will be rejected because they themselves are their favorite’s third choice.</p>
</div></blockquote>
<p><img alt="image.png" src="_images/GaleShapley14.png" /></p>
</section>
<section id="exercise-the-roommate-problem">
<h2>Exercise: The roommate Problem<a class="headerlink" href="#exercise-the-roommate-problem" title="Permalink to this headline">¶</a></h2>
<p><img alt="image.png" src="_images/GaleShapley15.png" /></p>
<p><img alt="image.png" src="_images/GaleShapley16.png" /></p>
</section>
</section>
<section id="the-gale-shapley-algorithm-for-finding-a-stable-matching-system">
<h1>The Gale-Shapley algorithm for finding a stable matching system<a class="headerlink" href="#the-gale-shapley-algorithm-for-finding-a-stable-matching-system" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><strong>First Stage:</strong> Every man turns to the woman who is first on his list and
proposes to her. Every woman who receives more than one proposal
selects her favorite from among those who propose to her and tells the
others that she will never marry them. Every man who is not rejected
is put on a “waiting list” of the woman to whom he proposed.</p>
</div></blockquote>
<blockquote>
<div><p><strong>Second Stage:</strong> Every man who was rejected turns to the woman who
is second on his list and proposes to her. Every woman who receives
more than one proposal, including any proposals from the previous
stage, selects her favorite, and puts him on her waiting list. She
informs the others that they are rejected.</p>
</div></blockquote>
<blockquote>
<div><p><strong>Third Stage:</strong> Every man who is rejected turns to the woman who is
next on his list – the second on his list if he was put on the waiting
list at a previous stage, or the third on his list if he was rejected twice. Once again, every woman selects her favorite from among those who have proposed to her, including anyone on her waiting list from the
previous stage, puts him on the waiting list, and rejects the others.
The procedure continues – until such time as no man is rejected.
At that stage every man on a waiting list becomes a mate, and the
procedure terminates.</p>
</div></blockquote>
<section id="id2">
<h2>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p><img alt="image.png" src="_images/GaleShapley17.png" /></p>
<p><img alt="image.png" src="_images/GaleShapley18.png" />
Mr. b, marked with an asterisk (*), is rejected. The others are
“waitlisted.”</p>
<p><img alt="image.png" src="_images/GaleShapley19.png" />
Mr. d is rejected (despite having been waitlisted at the previous stage).</p>
<p><img alt="image.png" src="_images/GaleShapley20.png" />
Mr. c is rejected.</p>
<p><img alt="image.png" src="_images/GaleShapley21.png" />
Mr. a is rejected.</p>
<p><img alt="image.png" src="_images/GaleShapley22.png" />
Mr. a is rejected again.</p>
<p><img alt="image.png" src="_images/GaleShapley23.png" /></p>
<p>The procedure ends and the proposed matching system is:
<img alt="image.png" src="_images/GaleShapley24.png" /></p>
<p><strong>Theorem:</strong> For a community of n men &amp; n women, the Gale-Shapley algorithm reaches a stable state at most in <span class="math notranslate nohighlight">\(n^2-2n+2\)</span> stages.</p>
</section>
</section>
<section id="the-number-of-men-does-not-equal-the-number-of-women">
<h1>The number of men does not equal the number of women<a class="headerlink" href="#the-number-of-men-does-not-equal-the-number-of-women" title="Permalink to this headline">¶</a></h1>
<p><img alt="image.png" src="_images/GaleShapley25.png" /></p>
<p><img alt="image.png" src="_images/GaleShapley26.png" /></p>
<p>The procedure terminates in the matching system:</p>
<p><img alt="image.png" src="_images/GaleShapley27.png" /></p>
<p><img alt="image.png" src="_images/GaleShapley28.png" /></p>
<p>Here again, the procedure terminates in the matching system:</p>
<p><img alt="image.png" src="_images/GaleShapley29.png" /></p>
</section>
<section id="existence-of-a-preference-list-that-does-not-include-all-members-of-the-opposite-sex">
<h1>Existence of a preference list that does not include all members of the opposite sex<a class="headerlink" href="#existence-of-a-preference-list-that-does-not-include-all-members-of-the-opposite-sex" title="Permalink to this headline">¶</a></h1>
<p>Just set the preference to zero when men/women rather being single than be paired of with certain women/men.</p>
<p><img alt="image.png" src="_images/GaleShapley30.png" /></p>
<p><img alt="image.png" src="_images/GaleShapley31.png" /></p>
<p>The matching system obtained is:</p>
<p><img alt="image.png" src="_images/GaleShapley32.png" /></p>
</section>
<section id="possible-indifference">
<h1>Possible Indifference<a class="headerlink" href="#possible-indifference" title="Permalink to this headline">¶</a></h1>
<p>Just re-order it yourself accordingly! ;)</p>
<p><img alt="image.png" src="_images/GaleShapley33.png" /></p>
<p>becomes</p>
<p><img alt="image.png" src="_images/GaleShapley34.png" /></p>
<p><img alt="image.png" src="_images/GaleShapley35.png" /></p>
<p>The stable matching system is:</p>
<p><img alt="image.png" src="_images/GaleShapley36.png" /></p>
<p>alternatively, if we re-order it like this:</p>
<p><img alt="image.png" src="_images/GaleShapley37.png" /></p>
<p><img alt="image.png" src="_images/GaleShapley38.png" /></p>
<p>The stable matching system is:</p>
<p><img alt="image.png" src="_images/GaleShapley39.png" /></p>
</section>
<section id="condition-for-the-existence-of-a-unique-stable-matching-system">
<h1>Condition for the existence of a unique stable matching system<a class="headerlink" href="#condition-for-the-existence-of-a-unique-stable-matching-system" title="Permalink to this headline">¶</a></h1>
<p>A system has a unique stable solution if the result of men proposing is the same as the result of women proposing.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="discussion">
<h1>Discussion<a class="headerlink" href="#discussion" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>Gale and Shapley were the first to ask whether their algorithm for
matching men and women was applicable to the college admissions problem. As they wrote in the conclusion of their paper, “In making the special assumptions needed in order to analyze our problem
mathematically, we necessarily moved further away from the original
college admissions question, and eventually in discussing the marriage problem, we abandoned reality altogether and entered the world
of mathematical make-believe. … It was our opinion, too, however,
that some of the ideas introduced here might usefully be applied to
certain phases of the admissions problem.”</p>
</div></blockquote>
<blockquote>
<div><p>What Gale and Shapley did not know at the time was that the
Association of American Medical Colleges had already for ten years
been applying the Gale–Shapley algorithm to the task of assigning
interns to hospitals in the United States. By a process of trial and error
that spanned over half a century, the Association in 1951 adopted the
procedure, later rediscovered by Gale and Shapley, that was hospital-optimal. A detailed description of this procedure can be found in <a class="reference external" href="http://web.stanford.edu/~alroth/papers/92_HGT_Two-SidedMatching.pdf">Two-Sided Matching by A. E. Roth and M. Sotomayor</a>. The book contains
many extensions that evolved after the appearance of the paper by
Gale and Shapley.</p>
</div></blockquote>
<p>[Gura &amp; Maschler, p56]</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="references">
<h1>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>(mostly “directly copied from”) Ein-Ya Gura &amp; Michael B. Maschler, <a class="reference external" href="http://katalog.hacettepe.edu.tr/client/tr_TR/default_tr/search/detailnonmodal/ent:%24002f%24002fSD_ILS%24002f0%24002fSD_ILS:312448/one?qu=ein+ya+gura">“Insights Into Game Theory”</a>, Cambridge Uni. Press, 2008. <a class="reference external" href="https://www.google.com/search?q=ISBN+978-0-511-45538-4&amp;oq=ISBN+978-0-511-45538-4">ISBN 978-0-511-45538-4</a></p></li>
<li><p>Economic Sciences Nobel Prize 2012:<br />
<em>“for the theory of stable allocations and the practice of market design.”</em></p></li>
<li><p><a class="reference external" href="https://www.nobelprize.org/prizes/economic-sciences/2012/shapley/facts/">Lloyd S. Shapley</a></p></li>
<li><p><a class="reference external" href="https://www.nobelprize.org/prizes/economic-sciences/2012/roth/facts/">Alvin E. Roth</a></p></li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="FIZ371_LN28_EST_Game_Theory_PrisonnersDilemmaWithMemory.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Implementation of Prisonner’s Dilemma with Memory</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="GaleShapleyMatching_Implementation.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Gale-Shapley Algorithm Implementation</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Dr. Emre S. Tasci<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>